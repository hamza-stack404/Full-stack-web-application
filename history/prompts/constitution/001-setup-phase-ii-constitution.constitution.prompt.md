---
id: 001
title: Setup Phase II Constitution
stage: constitution
date: 2026-01-04
surface: agent
model: gemini-cli
feature: none
branch: main
user: unspecified
command: /sp.constitution
labels: [constitution, setup]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
- .specify/memory/constitution.md
- .specify/templates/plan-template.md
- .specify/templates/tasks-template.md
- GEMINI.md
tests:
- none
---

## Prompt

/sp.constitution 
# Phase II Constitution: Full-Stack Web Application

## 1. Core Principles
- **Spec-Driven Only**: No code shall be written manually. [cite_start]Every line of code must be generated by an AI agent (Gemini Cli) based on a validated task from `speckit.tasks`.
- [cite_start]**Agentic Dev Stack**: Follow the strict lifecycle: Specify ‚Üí Plan ‚Üí Tasks ‚Üí Implement.
- **User Isolation**: Security is a primary constraint. Every data operation MUST be filtered by the authenticated user's ID. [cite_start]A user should never be able to access or modify another user's tasks.
- [cite_start]**Stateless Architecture**: The backend should remain stateless, relying on the database and JWT for context.

## 2. Technology Stack Constraints
- [cite_start]**Frontend**: Next.js 16+ (App Router), TypeScript, Tailwind CSS.
- [cite_start]**Backend**: Python 3.13+ with FastAPI.
- [cite_start]**ORM**: SQLModel for all database interactions.
- [cite_start]**Database**: Neon Serverless PostgreSQL.
- [cite_start]**Authentication**: Better Auth with JWT plugin.
- [cite_start]**Environment**: WSL 2 (Ubuntu-22.04) for Windows users.

## 3. Architectural Standards
- [cite_start]**Monorepo Structure**: The project must be organized as a monorepo with `/frontend`, `/backend`, and `/specs` directories to maintain a single context for the AI agent.
- **API Standards**: 
    - [cite_start]All routes must be under `/api/`.
    - [cite_start]Return JSON responses only.
    - [cite_start]Use Pydantic models for all request and response validation.
    - [cite_start]Use proper HTTP status codes (e.g., 401 for Unauthorized, 404 for Not Found).
- [cite_start]**Auth Integration**: Both frontend and backend must use a shared `BETTER_AUTH_SECRET` for JWT signing and verification.
- [cite_start]**UI/UX**: Responsive design using Tailwind CSS; no inline styles allowed.

## 4. Documentation & Memory
- [cite_start]**GEMINI.md Hierarchy**: Maintain a root `GEMINI.md` for project overview and sub-folder `GEMINI.md` files for technology-specific patterns (Frontend/Backend).
- [cite_start]**Traceability**: Every implementation must reference a specific Task ID from `speckit.tasks`.

## 5. Definition of Done for Phase II
- [cite_start]Full CRUD functionality implemented for tasks (Add, View, Update, Delete, Toggle Complete).
- [cite_start]Persistent storage in Neon DB.
- [cite_start]Functional User Signup/Signin.
- [cite_start]Secured API endpoints requiring valid JWT.
- [cite_start]Successful deployment of frontend on Vercel and backend on a reachable URL.

## Response snapshot

I have updated the project constitution and related templates.

- **New Version**: 1.0.0
- **Rationale**: Initial setup of the constitution for the project.
- **Files updated**:
  - `.specify/memory/constitution.md`
  - `.specify/templates/plan-template.md`
  - `.specify/templates/tasks-template.md`
  - `GEMINI.md`
- **Suggested commit message**: `docs: amend constitution to v1.0.0 (initial setup)`

## Outcome

- ‚úÖ Impact: High. The constitution is the foundation for the project.
- üß™ Tests: n/a
- üìÅ Files: 4 files updated.
- üîÅ Next prompts: /sp.specify
- üß† Reflection: The constitution provides a solid foundation for the project. The next step is to start specifying features.
